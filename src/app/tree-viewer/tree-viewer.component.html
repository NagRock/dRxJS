<svg
  *ngIf="layout$ | async as layout"
  [attr.viewBox]="'0 0 ' + getWidth(layout) + ' ' + getHeight(layout)"
>
    <path
      *ngFor="let link of layout.links"
      [appTreeViewerLink]="link"
      fill="none"
      stroke="black"
      stroke-width="4">
    </path>

  <g
    *ngFor="let node of layout.nodes"
    [appTreeViewerNode]="node">
    <circle
      r="16"
      [attr.fill]="node.data === observable ? 'red' : 'white'"
      stroke="black"
      stroke-width="4">
    </circle>
    <text
      y="16"
      text-anchor="middle"
      dominant-baseline="text-before-edge"
      font-size="12px"
      font-weight="600">
      {{node.data?.operator?.func?.name}} <!--todo: make generic-->
    </text>
  </g>
</svg>


<!--<ng-template #overlay let-data>-->
<!--  <div class="overlay">-->
<!--    <code class="location">{{data.location.file}} ({{data.location.line}}:{{data.location.char}}) #{{data.id}}</code>-->
<!--    <code class="expression">{{data.expression}}</code>-->
<!--  </div>-->
<!--</ng-template>-->
