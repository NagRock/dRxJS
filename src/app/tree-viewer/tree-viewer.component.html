<svg
  *ngIf="layout$ | async as layout"
  style="background-color: rebeccapurple; border-radius: 3px"
  [attr.width]="width"
  [attr.height]="height">

  <path
    *ngFor="let d of layout.links"
    fill="none"
    stroke="black"
    stroke-width="4"
    [attr.d]="'M' + getX(d.source) + ',' + getY(d.source) + 'C' + (getX(d.source) + getX(d.target)) / 2 + ',' + getY(d.source) + ' ' + (getX(d.source) + getX(d.target)) / 2 + ',' + getY(d.target) + ' ' + getX(d.target) + ',' + getY(d.target)">
  </path>


  <circle
    *ngFor="let node of layout.nodes"
    r="16"
    fill="darkgrey"
    stroke="black"
    stroke-width="4"
    [attr.transform]="'translate(' + getX(node) + ',' + getY(node) + ')'"
    [appStreamTooltip]="node.data.stream">
  </circle>

</svg>
